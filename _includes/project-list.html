<div class="tab-container">
    <button class="tab-link active" onclick="openTab(event, 'Profile')">Profile</button>
    <button class="tab-link" onclick="openTab(event, 'History')">History</button>
    <button class="tab-link" onclick="openTab(event, 'Portfolio')">Portfolio</button>
</div>

<div class="progress-container">
    <div class="progress-bar" id="myBar"></div>
</div>

<button class="theme-switch" onclick="toggleTheme()" id="themeBtn" title="ÌÖåÎßà Î≥ÄÍ≤Ω">üåì</button>

<div id="Profile" class="tab-content active">
    <div class="profile-container">

        <div class="github-profile-card">
            <img src="https://github.com/vcsHB.png" class="profile-avatar">
            <h2 style="margin: 0;">vcs</h2>
            <p style="color: #666; margin: 5px 0;">Developer</p>

            <div class="category-badges"
                style="margin-bottom: 15px; display: flex; flex-wrap: wrap; justify-content: center; gap: 5px;">
                {% assign selected_ids = "GameDev,ClientDev" | split: "," %}
                {% for cat in site.data.categories %}
                {% if selected_ids contains cat.id %}
                <span class="category-badge"
                    style="background: {{ cat.color }}; font-size: 10px; padding: 3px 8px; border-radius: 12px; color: white;">
                    {{ cat.name }}
                </span>
                {% endif %}
                {% endfor %}
            </div>

            <div class="profile-stats">
                <p>üìç Seoul, Korea</p>
                <p>üìß <a href="mailto:hoonbot06@gmail.com">hoonbot06@gmail.com</a></p>
                <p>üîó <a href="https://github.com/vcsHB" target="_blank">github.com/vcsHB</a></p>
            </div>

            <div class="github-contributions" style="margin-top: 20px; text-align: left;">
                <h3 style="font-size: 14px; margin-bottom: 8px; color: #333;">Contributions</h3>
                <img src="https://ghchart.rshah.org/0366d6/vcsHB" alt="vcsHB's Github Chart"
                    style="width: 100%; border-radius: 8px; border: 1px solid #eee; padding: 8px; background: white;" />
            </div>
        </div>
        <div class="github-profile-readme">
            <div id="profileReadmeContent"></div>

            <h3 style="margin-top: 30px;">Í∏∞Ïà† Ïó≠Îüâ</h3>
            <div class="skill-gauges">
                {% for skill in site.data.tech_skills %}
                {% assign circumference = 282.7 %}
                {% assign offset = circumference | times: skill.level | divided_by: 100 %}
                {% assign final_offset = circumference | minus: offset %}

                <div class="gauge-item">
                    <svg class="progress-ring" width="120" height="120">
                        <circle stroke="var(--gauge-bg)" stroke-width="8" fill="transparent" r="45" cx="60" cy="60" />
                        <circle class="progress-ring-circle skill-gauge-bar" data-light="{{ skill.color }}"
                            data-dark="{{ skill.darkModeColor | default: skill.color }}"
                            stroke="{{ skill.color }}" stroke-width="8" fill="transparent" r="45" cx="60" cy="60"
                            style="stroke-dasharray: {{ circumference }}; stroke-dashoffset: {{ final_offset }};" />
                    </svg>

                    <div class="gauge-inner-content">
                        <img src="{{ skill.icon }}" class="gauge-logo">
                        <div class="gauge-overlay"></div>
                        <div class="gauge-text-box">
                            <small>Level</small>
                            <span>{{ skill.level }}</span>
                        </div>
                    </div>
                    <div class="gauge-label skill-gauge-label" data-light="{{ skill.color }}"
                        data-dark="{{ skill.darkModeColor | default: skill.color }}"
                        style="color: {{ skill.color }};">
                        {{ skill.name }}
                    </div>
                </div>
                {% endfor %}
            </div>
            {% comment %}
            <div class="tech-slider" id="techSlider">
                <div class="tech-track">
                    {% for skill in site.data.tech_skills %}
                    <div class="tech-item">
                        <img src="{{ skill.icon }}" alt="{{ skill.name }}">
                        <span style="font-size: 11px; color: #888;">{{ skill.name }}</span>
                    </div>
                    {% endfor %}
                </div>
            </div>
            {% endcomment %}
        </div>
    </div>
</div>

<div id="History" class="tab-content">
    <div class="history-list">
        {% for item in site.data.history %}
        <div class="history-item">
            <span class="history-date">{{ item.date }}</span>
            <div class="history-info">
                <strong>{{ item.title }}</strong>
                <p>{{ item.description }}</p>
            </div>
        </div>
        {% endfor %}
    </div>
</div>

<div id="Portfolio" class="tab-content">
    <div style="margin-bottom: 30px;">
        <input type="text" id="searchInput" placeholder="Search projects..."
            style="width: 100%; padding: 12px; border-radius: 12px; border: 1px solid #eee;">
    </div>
    <div id="projectList">
        {% assign sorted_projects = site.projects | sort: "order" %}

        {% for item in sorted_projects %}
        <div class="project-card" onclick="openModal(this)"
            style="--hover-color: {{ item.color | default: 'var(--accent-color)' }};">

            <script class="project-content-raw" type="text/template">{{ item.content }}</script>

            <div class="thumbnail-container">
                <img src="{{ item.thumbnail }}">
            </div>

            <div class="content-container">
                <div class="project-categories" style="margin-bottom: 10px;">
                    {% for category_id in item.categories %}
                    {% assign category = site.data.categories | where: "id", category_id | first %}
                    {% if category %}
                    <span class="category-badge" style="background: {{ category.color }};">
                        {{ category.name }}
                    </span>
                    {% endif %}
                    {% endfor %}
                </div>

                <h3 style="margin: 0 0 10px 0;">{{ item.title }}</h3>
                <p style="color: var(--sub-text); line-height: 1.6; margin: 0;">{{ item.description }}</p>
            </div>

            <div class="heart-container">
                <button onclick="event.stopPropagation(); handleHeartClick(this, '{{ item.title | slugify }}')">
                    ‚ù§Ô∏è <span class="heart-count" id="count-{{ item.title | slugify }}">0</span>
                </button>
            </div>
        </div>
        {% endfor %}
    </div>
</div>

<div id="portfolioModal" class="modal" onclick="if(event.target==this) closeModal()">
    <div class="modal-content">
        <span class="close-modal" onclick="closeModal()">&times;</span>

        <img id="modalThumbnail" class="modal-header-image" src="" alt="Cover">

        <div class="modal-info-section">
            <h1 id="modalTitle"></h1>
            <div id="modalCategories"></div>
            <hr style="border: 0; border-top: 1px solid #eee; margin-bottom: 30px;">
        </div>

        <div id="modalBody" class="markdown-body"></div>
    </div>
</div>

<script>
    // Move To Top
    window.onload = function () {
        setTimeout(function () {
            window.scrollTo(0, 0);
        }, 10);
    };
</script>


<script>
    function updateSkillColors(theme) {
        const elements = document.querySelectorAll('.skill-gauge-bar, .skill-gauge-label');
        elements.forEach(el => {
            const color = theme === 'dark' ? el.getAttribute('data-dark') : el.getAttribute('data-light');
            if (el.classList.contains('skill-gauge-bar')) {
                el.setAttribute('stroke', color);
            } else {
                el.style.color = color;
            }
        });
    }

    function toggleTheme() {
        const currentTheme = document.documentElement.getAttribute("data-theme");
        const targetTheme = currentTheme === "dark" ? "light" : "dark";

        document.documentElement.setAttribute("data-theme", targetTheme);
        localStorage.setItem("theme", targetTheme);
        updateSkillColors(targetTheme);
    }

    const savedTheme = localStorage.getItem("theme") || "light";
    document.documentElement.setAttribute("data-theme", savedTheme);
    updateSkillColors(savedTheme);
</script>