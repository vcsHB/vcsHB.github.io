<script>
    function openTab(evt, tabName) {
        const tabcontents = document.getElementsByClassName("tab-content");
        for (let i = 0; i < tabcontents.length; i++) {
            tabcontents[i].classList.remove("active");
        }

        const tablinks = document.getElementsByClassName("tab-link");
        for (let i = 0; i < tablinks.length; i++) {
            tablinks[i].classList.remove("active");
        }

        document.getElementById(tabName).classList.add("active");
        evt.currentTarget.classList.add("active");

        if (tabName === 'Profile') {
            loadProfileReadme();
        }
    }

    function loadProfileReadme() {
        const container = document.querySelector('.github-profile-readme');
        if (!container) return;

        fetch('{{ site.profile_readme_path | relative_url }}')
            .then(response => response.text())
            .then(markdown => {
                container.innerHTML = marked.parse(markdown);
                if (window.Prism) Prism.highlightAll();
                setTimeout(() => {
                    container.classList.add('active');
                }, 50);
            })
            .catch(() => {
                container.innerHTML = '<p>README를 불러올 수 없습니다.</p>';
            });
    }

    document.addEventListener("DOMContentLoaded", function () {
        const activeTab = document.querySelector('.tab-link.active');
        if (activeTab) {
            const tabName = activeTab.getAttribute('onclick').match(/'([^']+)'/)[1];
            if (tabName === 'Profile') loadProfileReadme();
        }
    });
</script>